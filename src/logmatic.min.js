!function(a,b){"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?module.exports=b():a.logmatic=b()}(this,function(){function a(a,b){if(a)for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c])}function b(a){console&&[{f:"log",l:"info"},{f:"info"},{f:"trace"},{f:"warn"},{f:"error"}].forEach(function(b){var c=b.f,d=b.l||b.f,e=console[c];console[c]=function(){var b=null;a&&(b={},b[a]=d);var c=Array.prototype.slice.call(arguments).map(function(a){return"object"==typeof a?JSON.stringify(a):String(a)}).join(" ");q(c,b),e.apply?e.apply(console,arguments):e(c)}})}function c(a){if(a){var b=window.onerror;window.onerror=function(c,d,e,f){var g={};g[a]={type:"JSException",url:d,line:e,col:f},q(c,g),b&&"function"==typeof b&&b.apply(window,arguments)}}}var d,e,f,g,h,i=500,j=10,k=-1,l=null,m=!1,n=null,o=function(a){d="https://api.logmatic.io/v1/input/"+a},p=function(a){a=a||{},null!=a.lingerMs&&(i=a.lingerMs),null!=a.maxPostCount&&(j=a.maxPostCount),null!=a.maxWaitingCount&&(k=a.maxWaitingCount)},q=function(b,c){if(!d)return void console.error("Please init Logmatic before pushing events");var e={message:b};a(c,e),r(e)},r=function(b){a(e,b),h&&(b[h]=window.location.href),l=l||[],l.push(JSON.stringify(b)),k>=0&&l.length>k&&l.shift(),s(!0)},s=function(a){!m&&!n&&l&&l.length&&(a&&i>=0?n=setTimeout(t,i):t())},t=function(){var a;j>0&&l.length>j?a="["+l.splice(0,j).join(",")+"]":(a=l.length>1?"["+l.join(",")+"]":l[0],l=null),n=null,m=!0;var b;"undefined"!=typeof XDomainRequest&&(b=new XDomainRequest),b=new XMLHttpRequest,b.open("POST",d,!0),b.constructor===XMLHttpRequest&&(b.setRequestHeader("Content-Type","application/json; charset=UTF-8"),f&&b.setRequestHeader("X-Logmatic-Add-IP",f),g&&b.setRequestHeader("X-Logmatic-Add-UserAgent",g)),b.onload=function(){m=!1,s(!1)},b.onerror=function(){m=!1,s(!1)},b.send(a)},u=function(a){e=a},v=function(a){h=a},w=function(a){f=a},x=function(a){g=a};return{init:o,log:q,setMetas:u,setSendConsoleErrors:c,setSendConsoleLogs:b,setIPTracking:w,setUserAgentTracking:x,setURLTracking:v,setBulkOptions:p}});
//# sourceMappingURL=logmatic.min.js.map