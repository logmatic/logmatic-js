!function(a,b){"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?module.exports=b():a.logmatic=b()}(this,function(){function a(a,b){if(a)for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c])}function b(){var a={},b=!1,c=!1,d=!1,e=!1,f=null,g=0;const h=500,i=3e4;return a.lock=function(){b=!0},a.unlock=function(){c=!1,b=!1},a.isLocked=function(){return b},a.isScheduled=function(){return c},a.isDisabled=function(){return d||0===k},a.postpone=function(a){var b=0;f&&clearTimeout(f),c=!0,e===!0&&(b=h*Math.pow(2,g),g++),f=setTimeout(a,Math.min(k+b,i))},a.handleResponse=function(a){var f=a.target.status;200===f||0===f?(d=n.length>0,e=!1,g=0):e=!0,c=!1,b=!1,v()},a}function c(a){a&&(j=a),console&&[{f:"log",l:"info"},{f:"info"},{f:"trace"},{f:"warn"},{f:"error"}].forEach(function(a){var b=a.f,c=a.l||a.f,d=console[b];console[b]=function(){var a=null;j&&(a={},a[j]=c);var b=Array.prototype.slice.call(arguments).map(function(a){return"object"==typeof a?JSON.stringify(a):String(a)}).join(" ");t(b,a),d.apply?d.apply(console,arguments):d(b)}})}function d(a){if(a){var b=window.TraceKit;if(b)b.report.subscribe(function(b){var c={};c[a]=b,j&&(c[j]="error"),t(b.message,c)});else{var c=window.onerror;window.onerror=function(b,d,e,f){var g={};g[a]={mode:"JSException",url:d,line:e,column:f},j&&(g[j]="error"),t(b,g),c&&"function"==typeof c&&c.apply(window,arguments)}}}}var e,f,g,h,i="https://api.logmatic.io/v1/input/",j="severity",k=500,l=10,m=-1,n=[],o=204800,p=b(),q=function(a){i+=a},r=function(a){i=a},s=function(a){a=a||{},null!=a.lingerMs&&a.lingerMs>=0&&(k=a.lingerMs),null!=a.maxPostCount&&(a.maxPostCount<1&&(a.maxPostCount=1),l=a.maxPostCount),null!=a.maxWaitingCount&&(m=a.maxWaitingCount),null!=a.maxContentSize&&(o=a.maxContentSize)},t=function(b,c){if(i){var d={message:b};j&&(d[j]="info"),a(c,d),u(d)}},u=function(b){a(e,b),h&&(b[h]=window.location.href),n=n||[],n.push(JSON.stringify(b)),m>=0&&n.length>m&&n.shift(),v()},v=function(){p.isLocked()||p.isScheduled()||(p.isDisabled()?w():p.postpone(w))},w=function(){p.lock();for(var a=[],b=0;n.length>0&&a.length<l;){var c=n.shift();if(b+=c.length,b>o){if(c.length>o)break;n.unshift(c);break}a.push(c)}if(0===a.length)return void p.unlock();var d,e="["+a.join(",")+"]";d="undefined"!=typeof XDomainRequest?new XDomainRequest:new XMLHttpRequest,d.open("POST",i,!0),d.constructor===XMLHttpRequest&&(d.setRequestHeader("Content-Type","application/json; charset=UTF-8"),f&&d.setRequestHeader("X-Logmatic-Add-IP",f),g&&d.setRequestHeader("X-Logmatic-Add-UserAgent",g)),d.onerror=p.handleResponse,d.onload=p.handleResponse,d.send(e)},x=function(a){e=a},y=function(a){h=a},z=function(a){f=a},A=function(a){g=a};return{init:q,log:t,forceEndpoint:r,setMetas:x,setSendErrors:d,setSendConsoleErrors:d,setSendConsoleLogs:c,setIPTracking:z,setUserAgentTracking:A,setURLTracking:y,setBulkOptions:s}});
//# sourceMappingURL=logmatic.min.js.map